# iPad 사이드바 프로필 영역 잘림 문제 해결

## 날짜
2025년 11월 25일

## 문제 상황
- **증상**: iPad 13인치 Chrome에서 사이드바 하단 프로필 영역이 화면 밖으로 잘림
- **환경**: iPad Chrome (접힌 상태/펼친 상태 모두 발생)
- **정상 작동 환경**: MacBook

## 첫 번째 시도 (실패)

### 가설
프로필 섹션의 하단 패딩(`pb-8`, `pb-10`, `pb-14`)이 과도하게 설정되어 잘리는 것으로 추정

### 수정 내용
```tsx
// Sidebar.tsx 143번 줄
// 변경 전
<div className={`${isCollapsed ? 'p-2 pb-8' : 'p-3 md:p-4 pb-10 md:pb-14'} ...`}>

// 변경 후
<div className={`${isCollapsed ? 'p-2 pb-4' : 'p-3 md:p-4 pb-4'} ...`}>
```

### 결과
- 배포 후에도 동일한 문제 발생
- 로컬 개발 서버(cloudflared 터널)에서는 정상 작동

## 근본 원인 발견

### 핵심 원인: `100vh` vs `100dvh`

iPad/모바일 브라우저에서 `100vh`는 **주소창/탭바를 포함한 전체 높이**로 계산됨.
실제 보이는 화면(visible viewport)보다 크게 잡혀서 하단이 잘리는 현상 발생.

```
┌─────────────────────┐
│     주소창/탭바      │  ← 100vh는 이 영역 포함
├─────────────────────┤
│                     │
│   실제 보이는 영역    │  ← 사용자가 보는 화면
│                     │
├─────────────────────┤
│     하단 UI 바       │  ← 100vh는 이 영역도 포함
└─────────────────────┘
```

### 해결책: `dvh` (Dynamic Viewport Height)

`dvh`는 브라우저 UI가 표시/숨김될 때 **동적으로 조정되는 뷰포트 높이**.
실제 보이는 화면 크기에 맞춰짐.

- `100vh` = 고정된 뷰포트 높이 (브라우저 UI 포함)
- `100dvh` = 동적 뷰포트 높이 (실제 보이는 영역)
- `100svh` = 작은 뷰포트 높이 (브라우저 UI가 최대일 때)
- `100lvh` = 큰 뷰포트 높이 (브라우저 UI가 숨겨졌을 때)

## 최종 해결 (성공)

### 1. index.css 수정
```css
/* 변경 전 */
html, body, #root {
  width: 100%;
  height: 100%;
  overflow: hidden;
}

/* 변경 후 */
html, body, #root {
  width: 100%;
  height: 100dvh;
  overflow: hidden;
}
```

### 2. Sidebar.tsx 수정
```tsx
// 변경 전
<div className={`... h-screen ...`}>

// 변경 후
<div className={`... h-[100dvh] ...`}>
```

## 검증 과정

1. 로컬 개발 서버 + cloudflared 터널로 iPad 테스트 → 정상 작동 확인
2. Netlify 배포
3. 캐시 우회 URL로 iPad 테스트 → 정상 작동 확인

## 교훈

1. **모바일/태블릿에서 `100vh` 사용 주의**: 브라우저 UI를 포함한 높이로 계산되어 레이아웃이 깨질 수 있음

2. **`dvh` 단위 활용**: 모던 브라우저에서 지원하는 동적 뷰포트 단위 사용 권장

3. **개발서버 vs 배포 환경 테스트**: 로컬에서 되는데 배포 후 안되면 캐시 문제일 수 있음. 고유 배포 URL로 테스트

4. **Tailwind에서 dvh 사용법**: `h-screen` 대신 `h-[100dvh]` 사용

## 브라우저 지원

`dvh` 단위는 대부분의 모던 브라우저에서 지원됨 (2023년 이후):
- Chrome 108+
- Safari 15.4+
- Firefox 101+
- Edge 108+

## 관련 커밋

- `1099163` - fix: iPad 사이드바 프로필 영역 잘림 문제 해결 (패딩 수정 - 부분 해결)
- `6928f9c` - fix: iPad 뷰포트 높이 문제 해결 (100vh → 100dvh) (완전 해결)

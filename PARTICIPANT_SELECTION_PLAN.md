# ì¶œì „ì ì„ íƒ ì‹œìŠ¤í…œ êµ¬í˜„ ê³„íš

## ğŸ“‹ í•µì‹¬ ìš”êµ¬ì‚¬í•­

### ê¸°ë³¸ ê°œë…
- **ëª¨ë“  ì¢…ëª© (ê°œì¸/ì§/ë‹¨ì²´)**: ì¶œì „ í•™ìƒë§Œ ì„ íƒ ê°€ëŠ¥
- **ê°œì¸ì „**: ì¶œì „ í•™ìƒ ê°œë³„ ì„ íƒ (ì˜ˆ: 1,2ë²ˆ í•™ìƒë§Œ)
- **ì§ì¤„ë„˜ê¸°**: 2ëª… ì„ íƒ ì‹œ ìë™ íŒ€ ìƒì„± (ì˜ˆ: 2,3ë²ˆ â†’ "2,3 íŒ€" ìë™ ìƒì„±)
- **ë‹¨ì²´ì „**: ì›í•˜ëŠ” ì¸ì› ì„ íƒ í›„ íŒ€ ìƒì„±
- **ê²½ê¸° ê¸°ë¡**: ì¶œì „ìë§Œ í…Œì´ë¸”ì— í‘œì‹œ

### ì‚¬ìš©ì ì˜ê²¬ ë°˜ì˜
1. âœ… **ê°œì¸ì „ ì¶œì „ ìˆ˜ì •**: ë‚˜ì¤‘ì— ì¶”ê°€/ì œê±° ê°€ëŠ¥
2. âœ… **ì§ì¤„ë„˜ê¸° íŒ€ ìƒì„±**: 2ëª… ì„ íƒ ì‹œ ìë™ ìƒì„± (ë²„íŠ¼ í´ë¦­ ë¶ˆí•„ìš”)
3. âœ… **íŒ€ ì´ë¦„**: í•™ìƒ ì´ë¦„ í¬í•¨ (ì˜ˆ: "ì² ìˆ˜,ì˜í¬ íŒ€")

---

## ğŸ¯ ìƒì„¸ ì‹œë‚˜ë¦¬ì˜¤

### ì‹œë‚˜ë¦¬ì˜¤ 1: ê°œì¸ì „ (ì•ìœ¼ë¡œ 1ë‹¨ ë›°ê¸°)

**1í•™ë…„ 1ë°˜: í•™ìƒ 5ëª… (1,2,3,4,5ë²ˆ)**

```
1. êµì‚¬ê°€ "ì•ìœ¼ë¡œ 1ë‹¨ ë›°ê¸°" ì¢…ëª© ì²´í¬
2. ğŸ“‹ í•™ìƒ ì„ íƒ ëª¨ë‹¬ ìë™ í‘œì‹œ:

   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ ì•ìœ¼ë¡œ 1ë‹¨ ë›°ê¸° - ì¶œì „ í•™ìƒ ì„ íƒ        â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚ 1í•™ë…„ 1ë°˜ (5ëª…)                         â”‚
   â”‚                                         â”‚
   â”‚ â˜‘ 1ë²ˆ í•™ìƒ  â˜‘ 2ë²ˆ í•™ìƒ  â˜ 3ë²ˆ í•™ìƒ    â”‚
   â”‚ â˜ 4ë²ˆ í•™ìƒ  â˜ 5ë²ˆ í•™ìƒ                 â”‚
   â”‚                                         â”‚
   â”‚ ì„ íƒ: 2ëª…                               â”‚
   â”‚              [í™•ì¸]                     â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

3. í™•ì¸ ë²„íŠ¼ â†’ ëª¨ë‹¬ ë‹«í˜
4. ê²½ê¸° ê¸°ë¡ í…Œì´ë¸”ì— 1,2ë²ˆë§Œ í‘œì‹œ:

   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ 1í•™ë…„ 1ë°˜ | ì•ìœ¼ë¡œ 1ë‹¨ ë›°ê¸°            â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚ 1ë²ˆ í•™ìƒ  [___] ê°œ                     â”‚
   â”‚ 2ë²ˆ í•™ìƒ  [___] ê°œ                     â”‚
   â”‚                                         â”‚
   â”‚ ì´ì : 0ì                                â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

5. ê° í•™ìƒ ì ìˆ˜ ì…ë ¥ â†’ ìë™ í•©ì‚°
```

**ì¶œì „ í•™ìƒ ìˆ˜ì •**:
- ê²½ê¸° ê¸°ë¡ í…Œì´ë¸” ìƒë‹¨ "âœï¸ ì¶œì „ ìˆ˜ì •" ë²„íŠ¼ í´ë¦­
- ë‹¤ì‹œ ëª¨ë‹¬ ì—´ë¦¼ â†’ 3ë²ˆ ì¶”ê°€ ì„ íƒ ê°€ëŠ¥

---

### ì‹œë‚˜ë¦¬ì˜¤ 2: ì§ì¤„ë„˜ê¸° (ë²ˆê°ˆì•„ ì§ì¤„ë„˜ê¸°)

**1í•™ë…„ 1ë°˜: í•™ìƒ 5ëª… (1,2,3,4,5ë²ˆ)**

```
1. êµì‚¬ê°€ "ë²ˆê°ˆì•„ ì§ì¤„ë„˜ê¸°" ì¢…ëª© ì²´í¬
2. ğŸ¤ íŒ€ êµ¬ì„± ëª¨ë‹¬ ìë™ í‘œì‹œ:

   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ ë²ˆê°ˆì•„ ì§ì¤„ë„˜ê¸° - íŒ€ êµ¬ì„±               â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚ 1í•™ë…„ 1ë°˜ (5ëª…)                         â”‚
   â”‚                                         â”‚
   â”‚ í•™ìƒ ì„ íƒ (2ëª…ì”© ì„ íƒí•˜ë©´ ìë™ íŒ€ ìƒì„±) â”‚
   â”‚ â˜‘ 2ë²ˆ í•™ìƒ  â˜‘ 3ë²ˆ í•™ìƒ  â˜ 4ë²ˆ í•™ìƒ    â”‚
   â”‚ â˜ 5ë²ˆ í•™ìƒ  â˜ 1ë²ˆ í•™ìƒ                 â”‚
   â”‚                                         â”‚
   â”‚ ì„ íƒ: 2ëª… â†’ ìë™ íŒ€ ìƒì„±!               â”‚
   â”‚                                         â”‚
   â”‚ ìƒì„±ëœ íŒ€ (0íŒ€):                        â”‚
   â”‚                                         â”‚
   â”‚              [ì™„ë£Œ]                     â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

3. 2,3ë²ˆ ì²´í¬ â†’ ì¦‰ì‹œ "2,3 íŒ€" ìë™ ìƒì„± â†’ ì²´í¬ ìë™ í•´ì œ:

   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ ìƒì„±ëœ íŒ€ (1íŒ€):                        â”‚
   â”‚                                         â”‚
   â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
   â”‚ â”‚ 2,3 íŒ€        [ğŸ—‘ï¸ ì‚­ì œ]      â”‚       â”‚
   â”‚ â”‚ 2ë²ˆ í•™ìƒ, 3ë²ˆ í•™ìƒ            â”‚       â”‚
   â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
   â”‚                                         â”‚
   â”‚ í•™ìƒ ì„ íƒ (2ëª…ì”©):                      â”‚
   â”‚ â˜ 2ë²ˆ í•™ìƒ  â˜ 3ë²ˆ í•™ìƒ  â˜‘ 4ë²ˆ í•™ìƒ    â”‚
   â”‚ â˜‘ 5ë²ˆ í•™ìƒ  â˜ 1ë²ˆ í•™ìƒ                 â”‚
   â”‚                                         â”‚
   â”‚ ì„ íƒ: 2ëª… â†’ ìë™ íŒ€ ìƒì„±!               â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

4. 4,5ë²ˆ ì²´í¬ â†’ "4,5 íŒ€" ìë™ ìƒì„±:

   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ ìƒì„±ëœ íŒ€ (2íŒ€):                        â”‚
   â”‚                                         â”‚
   â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
   â”‚ â”‚ 2,3 íŒ€        [ğŸ—‘ï¸ ì‚­ì œ]      â”‚       â”‚
   â”‚ â”‚ 2ë²ˆ í•™ìƒ, 3ë²ˆ í•™ìƒ            â”‚       â”‚
   â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
   â”‚                                         â”‚
   â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
   â”‚ â”‚ 4,5 íŒ€        [ğŸ—‘ï¸ ì‚­ì œ]      â”‚       â”‚
   â”‚ â”‚ 4ë²ˆ í•™ìƒ, 5ë²ˆ í•™ìƒ            â”‚       â”‚
   â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
   â”‚                                         â”‚
   â”‚              [ì™„ë£Œ]                     â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

5. ê²½ê¸° ê¸°ë¡ í…Œì´ë¸”ì— íŒ€ë³„ í‘œì‹œ:

   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ 1í•™ë…„ 1ë°˜ | ë²ˆê°ˆì•„ ì§ì¤„ë„˜ê¸°            â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚ 2,3 íŒ€    [___] ê°œ                     â”‚
   â”‚ (2ë²ˆ, 3ë²ˆ)                              â”‚
   â”‚                                         â”‚
   â”‚ 4,5 íŒ€    [___] ê°œ                     â”‚
   â”‚ (4ë²ˆ, 5ë²ˆ)                              â”‚
   â”‚                                         â”‚
   â”‚ ì´ì : 0ì                                â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**íŒ€ ì‚­ì œ ì‹œ ìë™ ì¬ì •ë ¬**:
- "2,3 íŒ€" ì‚­ì œ â†’ "4,5 íŒ€"ì´ ìë™ìœ¼ë¡œ "1íŒ€"ìœ¼ë¡œ ì¬ì •ë ¬
- í…Œì´ë¸”ì—ì„œë„ ì¦‰ì‹œ ë°˜ì˜

---

## ğŸ“¦ ë°ì´í„° êµ¬ì¡°

### ìˆ˜ì •ëœ ClassResult

```typescript
// types.ts
export interface ClassResult {
  score: number;  // í•™ê¸‰ ì´ì  (ìë™ í•©ì‚°)

  // ê°œì¸ì „ìš© (INDIVIDUAL)
  participantIds?: string[];  // ì¶œì „ í•™ìƒ ID ë°°ì—´ (NEW!)
  studentScores?: Record<string, number>;  // í•™ìƒë³„ ì ìˆ˜

  // ì§/ë‹¨ì²´ì „ìš© (PAIR/TEAM)
  teams?: Team[];  // íŒ€ ë°°ì—´
}
```

### Team ì¸í„°í˜ì´ìŠ¤ (ê¸°ì¡´ ìœ ì§€)

```typescript
export interface Team {
  id: string;           // team_${timestamp}
  classId: string;      // ì†Œì† í•™ê¸‰
  eventId: string;      // ì°¸ê°€ ì¢…ëª©
  name: string;         // "2,3 íŒ€"
  memberIds: string[];  // íŒ€ì› ID
  score: number;        // íŒ€ ì ìˆ˜
}
```

### ë°ì´í„° ì €ì¥ ì˜ˆì‹œ

```typescript
// 1í•™ë…„ 1ë°˜ì˜ results
{
  "evt_1": {  // ì•ìœ¼ë¡œ 1ë‹¨ ë›°ê¸° (INDIVIDUAL)
    "score": 25,
    "participantIds": ["std_1", "std_2"],  // 1,2ë²ˆë§Œ ì¶œì „
    "studentScores": {
      "std_1": 10,
      "std_2": 15
    }
  },
  "evt_9": {  // ë²ˆê°ˆì•„ ì§ì¤„ë„˜ê¸° (PAIR)
    "score": 83,
    "teams": [
      {
        "id": "team_1",
        "classId": "class_1",
        "eventId": "evt_9",
        "name": "2,3 íŒ€",
        "memberIds": ["std_2", "std_3"],
        "score": 45
      },
      {
        "id": "team_2",
        "classId": "class_1",
        "eventId": "evt_9",
        "name": "4,5 íŒ€",
        "memberIds": ["std_4", "std_5"],
        "score": 38
      }
    ]
  }
}
```

---

## ğŸ› ï¸ êµ¬í˜„ ë‹¨ê³„

### Phase 1: ë°ì´í„° êµ¬ì¡° ìˆ˜ì • (15ë¶„)

**íŒŒì¼**: `types.ts`

**ì‘ì—…**:
```typescript
export interface ClassResult {
  score: number;

  // INDIVIDUALìš© (NEW!)
  participantIds?: string[];  // ì¶œì „ í•™ìƒ ID ë°°ì—´
  studentScores?: Record<string, number>;

  // PAIR/TEAMìš©
  teams?: Team[];
}
```

---

### Phase 2: ê°œì¸ì „ ì¶œì „ í•™ìƒ ì„ íƒ ëª¨ë‹¬ (45ë¶„)

**íŒŒì¼**: `components/ParticipantSelectionModal.tsx` (ì‹ ê·œ)

**Props**:
```typescript
interface ParticipantSelectionModalProps {
  event: CompetitionEvent;
  classTeam: ClassTeam;
  existingParticipantIds: string[];  // ê¸°ì¡´ ì„ íƒ í•™ìƒ
  onSave: (participantIds: string[]) => void;
  onClose: () => void;
}
```

**UI êµ¬ì¡°**:
```tsx
<Modal>
  <Header>{event.name} - ì¶œì „ í•™ìƒ ì„ íƒ</Header>

  {/* í•™ìƒ ì²´í¬ë°•ìŠ¤ ê·¸ë¦¬ë“œ */}
  <div className="grid grid-cols-3 gap-2">
    {classTeam.students.map(student => (
      <Checkbox
        key={student.id}
        checked={selectedIds.includes(student.id)}
        onChange={() => toggleStudent(student.id)}
      >
        {student.name}
      </Checkbox>
    ))}
  </div>

  {/* ì„ íƒ í˜„í™© */}
  <div className="text-sm text-slate-600">
    ì„ íƒ: {selectedIds.length}ëª…
  </div>

  <Footer>
    <Button onClick={onClose}>ì·¨ì†Œ</Button>
    <Button onClick={handleSave}>í™•ì¸</Button>
  </Footer>
</Modal>
```

**ì£¼ìš” ë¡œì§**:
```typescript
const handleSave = () => {
  onSave(selectedIds);  // participantIds ì €ì¥
};
```

---

### Phase 3: ì§/ë‹¨ì²´ì „ ê°„í¸ íŒ€ ìƒì„± ëª¨ë‹¬ (1ì‹œê°„)

**íŒŒì¼**: `components/QuickTeamCreationModal.tsx` (ì‹ ê·œ)

**Props**:
```typescript
interface QuickTeamCreationModalProps {
  event: CompetitionEvent;
  classTeam: ClassTeam;
  existingTeams: Team[];
  onSave: (teams: Team[]) => void;
  onClose: () => void;
}
```

**UI êµ¬ì¡°**:
```tsx
<Modal>
  <Header>{event.name} - íŒ€ êµ¬ì„±</Header>

  {/* ìƒì„±ëœ íŒ€ ëª©ë¡ */}
  <div className="space-y-2">
    <h4 className="font-bold">ìƒì„±ëœ íŒ€ ({teams.length}íŒ€)</h4>
    {teams.map((team, idx) => (
      <div key={team.id} className="flex items-center gap-2 p-2 bg-slate-50 rounded">
        <span className="flex-1">
          {idx + 1}íŒ€: {team.name}
          <span className="text-xs text-slate-500 ml-2">
            ({team.memberIds.map(id =>
              classTeam.students.find(s => s.id === id)?.name
            ).join(', ')})
          </span>
        </span>
        <button onClick={() => handleDeleteTeam(team.id)}>
          ğŸ—‘ï¸ ì‚­ì œ
        </button>
      </div>
    ))}
  </div>

  {/* í•™ìƒ ì„ íƒ */}
  <div>
    <h4 className="font-bold">
      í•™ìƒ ì„ íƒ ({event.type === 'PAIR' ? '2ëª…ì”© ì„ íƒí•˜ë©´ ìë™ íŒ€ ìƒì„±' : 'ì›í•˜ëŠ” ì¸ì› ì„ íƒ'})
    </h4>
    <div className="grid grid-cols-3 gap-2">
      {classTeam.students.map(student => (
        <Checkbox
          key={student.id}
          checked={selectedIds.includes(student.id)}
          onChange={() => toggleStudent(student.id)}
        >
          {student.name}
        </Checkbox>
      ))}
    </div>
    <div className="text-sm text-slate-600 mt-2">
      ì„ íƒ: {selectedIds.length}ëª…
      {event.type === 'PAIR' && selectedIds.length === 2 && (
        <span className="text-green-600 font-bold ml-2">â†’ ìë™ íŒ€ ìƒì„±!</span>
      )}
    </div>
  </div>

  {/* ë‹¨ì²´ì „ì¼ ë•Œë§Œ "íŒ€ ìƒì„±" ë²„íŠ¼ */}
  {event.type === 'TEAM' && selectedIds.length > 0 && (
    <Button onClick={handleCreateTeam}>íŒ€ ìƒì„±</Button>
  )}

  <Footer>
    <Button onClick={onClose}>ì·¨ì†Œ</Button>
    <Button onClick={handleSave}>ì™„ë£Œ</Button>
  </Footer>
</Modal>
```

**í•µì‹¬ ë¡œì§**:
```typescript
// í•™ìƒ ì„ íƒ/í•´ì œ
const toggleStudent = (studentId: string) => {
  const newIds = selectedIds.includes(studentId)
    ? selectedIds.filter(id => id !== studentId)
    : [...selectedIds, studentId];

  setSelectedIds(newIds);

  // ì§ì¤„ë„˜ê¸°: 2ëª… ì„ íƒ ì‹œ ìë™ íŒ€ ìƒì„±
  if (event.type === 'PAIR' && newIds.length === 2) {
    createTeamFromSelection(newIds);
  }
};

// íŒ€ ìë™ ìƒì„±
const createTeamFromSelection = (memberIds: string[]) => {
  const memberNames = memberIds
    .map(id => classTeam.students.find(s => s.id === id)?.name)
    .filter(Boolean)
    .join(',');

  const newTeam: Team = {
    id: `team_${Date.now()}`,
    classId: classTeam.id,
    eventId: event.id,
    name: `${memberNames} íŒ€`,
    memberIds,
    score: 0
  };

  setTeams([...teams, newTeam]);
  setSelectedIds([]);  // ì²´í¬ í•´ì œ
};

// íŒ€ ì‚­ì œ + ìë™ ì¬ì •ë ¬
const handleDeleteTeam = (teamId: string) => {
  const updatedTeams = teams
    .filter(t => t.id !== teamId)
    .map((team, idx) => {
      // íŒ€ ì´ë¦„ ì¬ì •ë ¬: "1íŒ€", "2íŒ€", "3íŒ€"...
      const memberNames = team.memberIds
        .map(id => classTeam.students.find(s => s.id === id)?.name)
        .filter(Boolean)
        .join(',');

      return {
        ...team,
        name: `${memberNames} íŒ€`
      };
    });

  setTeams(updatedTeams);
};
```

---

### Phase 4: GradeView í†µí•© (30ë¶„)

**íŒŒì¼**: `components/GradeView.tsx`

**ìˆ˜ì • ì‚¬í•­**:

1. **ëª¨ë‹¬ ìƒíƒœ ê´€ë¦¬**
```typescript
const [participantModalEvent, setParticipantModalEvent] = useState<CompetitionEvent | null>(null);
const [teamCreationModalEvent, setTeamCreationModalEvent] = useState<CompetitionEvent | null>(null);
```

2. **ì¢…ëª© ì„ íƒ ì‹œ ëª¨ë‹¬ ìë™ ì˜¤í”ˆ**
```typescript
const handleToggleEvent = (eventId: string) => {
  const event = events.find(e => e.id === eventId);
  const currentConfig = gradeConfig.events[eventId] || { selected: false };
  const isSelecting = !currentConfig.selected;

  // ì„¤ì • ì—…ë°ì´íŠ¸
  onUpdateConfig({
    ...gradeConfig,
    events: {
      ...gradeConfig.events,
      [eventId]: {
        ...currentConfig,
        selected: isSelecting
      }
    }
  });

  // ì„ íƒ ì‹œ ëª¨ë‹¬ ì˜¤í”ˆ
  if (isSelecting && event) {
    if (gradeClasses.length === 0) {
      alert('ë¨¼ì € í•™ê¸‰ì„ ë“±ë¡í•´ì£¼ì„¸ìš”.');
      return;
    }

    if (event.type === 'INDIVIDUAL') {
      setParticipantModalEvent(event);
    } else if (event.type === 'PAIR' || event.type === 'TEAM') {
      setTeamCreationModalEvent(event);
    }
  }
};
```

3. **ëª¨ë‹¬ ë Œë”ë§**
```tsx
{/* ê°œì¸ì „ ì¶œì „ í•™ìƒ ì„ íƒ ëª¨ë‹¬ */}
{participantModalEvent && (
  <ParticipantSelectionModal
    event={participantModalEvent}
    classTeam={gradeClasses[0]}  // ì²« ë²ˆì§¸ í•™ê¸‰
    existingParticipantIds={
      gradeClasses[0]?.results[participantModalEvent.id]?.participantIds || []
    }
    onSave={(participantIds) => {
      // participantIds ì €ì¥ ë¡œì§
      handleSaveParticipants(participantModalEvent.id, participantIds);
      setParticipantModalEvent(null);
    }}
    onClose={() => setParticipantModalEvent(null)}
  />
)}

{/* ì§/ë‹¨ì²´ì „ íŒ€ êµ¬ì„± ëª¨ë‹¬ */}
{teamCreationModalEvent && (
  <QuickTeamCreationModal
    event={teamCreationModalEvent}
    classTeam={gradeClasses[0]}
    existingTeams={
      gradeClasses[0]?.results[teamCreationModalEvent.id]?.teams || []
    }
    onSave={(teams) => {
      handleSaveTeams(teamCreationModalEvent.id, teams);
      setTeamCreationModalEvent(null);
    }}
    onClose={() => setTeamCreationModalEvent(null)}
  />
)}
```

---

### Phase 5: MatrixRecordTable ìˆ˜ì • (45ë¶„)

**íŒŒì¼**: `components/MatrixRecordTable.tsx`

**í•µì‹¬ ë³€ê²½ì‚¬í•­**:

1. **ê°œì¸ì „: ì¶œì „ í•™ìƒë§Œ í‘œì‹œ**
```tsx
{evt.type === 'INDIVIDUAL' && isExpanded && (
  <div className="space-y-1">
    <div className="flex items-center justify-between mb-2">
      <p className="text-[10px] font-bold text-slate-500 uppercase">
        ì¶œì „ í•™ìƒ ({result?.participantIds?.length || 0}ëª…)
      </p>
      <button
        onClick={() => handleEditParticipants(cls.id, evt.id)}
        className="text-xs text-indigo-600 hover:underline"
      >
        âœï¸ ì¶œì „ ìˆ˜ì •
      </button>
    </div>

    {/* ì¶œì „ í•™ìƒë§Œ í‘œì‹œ */}
    {(result?.participantIds || []).map(studentId => {
      const student = cls.students.find(s => s.id === studentId);
      if (!student) return null;

      const studentScore = result?.studentScores?.[studentId] || 0;
      return (
        <div key={studentId} className="flex items-center gap-2">
          <span className="text-xs text-slate-700 flex-1">
            {student.name}
          </span>
          <input
            type="number"
            value={studentScore || ''}
            onChange={(e) => handleStudentScoreChange(
              cls.id,
              evt.id,
              studentId,
              parseInt(e.target.value) || 0
            )}
            className="w-16 px-2 py-1 text-xs text-center border border-slate-200 rounded"
          />
        </div>
      );
    })}

    {/* ì¶œì „ í•™ìƒì´ ì—†ì„ ë•Œ */}
    {(!result?.participantIds || result.participantIds.length === 0) && (
      <p className="text-xs text-slate-400 text-center py-2">
        ì¶œì „ í•™ìƒì„ ì„ íƒí•´ì£¼ì„¸ìš”
      </p>
    )}
  </div>
)}
```

2. **ì§/ë‹¨ì²´ì „: íŒ€ë³„ í‘œì‹œ (ê¸°ì¡´ ìœ ì§€)**
```tsx
{(evt.type === 'TEAM' || evt.type === 'PAIR') && isExpanded && (
  <div className="space-y-2">
    <p className="text-[10px] font-bold text-slate-500 uppercase">
      íŒ€ë³„ ì ìˆ˜
    </p>
    {result?.teams?.map((team) => (
      <div key={team.id} className="bg-white rounded-lg p-2 border">
        <div className="flex items-center justify-between mb-1">
          <span className="text-xs font-bold">{team.name}</span>
          <input
            type="number"
            value={team.score || ''}
            onChange={(e) => handleTeamScoreChange(
              cls.id,
              evt.id,
              team.id,
              parseInt(e.target.value) || 0
            )}
            className="w-16 px-2 py-1 text-xs text-center border rounded"
          />
        </div>
        <div className="flex flex-wrap gap-1">
          {team.memberIds.map(memberId => {
            const student = cls.students.find(s => s.id === memberId);
            return (
              <span key={memberId} className="text-[10px] px-1.5 py-0.5 bg-indigo-50 text-indigo-600 rounded">
                {student?.name || '???'}
              </span>
            );
          })}
        </div>
      </div>
    ))}
  </div>
)}
```

3. **ì°¸ê°€ì ìˆ˜ ê³„ì‚° ìˆ˜ì •**
```typescript
let participantCount = 0;
if (evt.type === 'INDIVIDUAL') {
  // ì¶œì „ í•™ìƒ ìˆ˜ë§Œ ì¹´ìš´íŠ¸
  participantCount = result?.participantIds?.length || 0;
} else if (evt.type === 'TEAM' || evt.type === 'PAIR') {
  // íŒ€ ì „ì²´ ê³ ìœ  ë©¤ë²„ ìˆ˜
  if (result?.teams && result.teams.length > 0) {
    const uniqueMembers = new Set(result.teams.flatMap(t => t.memberIds));
    participantCount = uniqueMembers.size;
  }
}
```

---

### Phase 6: ì ìˆ˜ ê³„ì‚° ë¡œì§ ê²€ì¦ (15ë¶„)

**ê°œì¸ì „ ì ìˆ˜ í•©ì‚°**:
```typescript
// MatrixRecordTable.tsx
const handleStudentScoreChange = (classId: string, eventId: string, studentId: string, score: number) => {
  const updatedClasses = classes.map(c => {
    if (c.id !== classId) return c;

    const result = c.results[eventId] || { score: 0, participantIds: [], studentScores: {} };
    const newScores = { ...result.studentScores, [studentId]: score };

    // participantIdsì— ìˆëŠ” í•™ìƒë§Œ í•©ì‚°
    const totalScore = (result.participantIds || [])
      .reduce((sum, id) => sum + (newScores[id] || 0), 0);

    return {
      ...c,
      results: {
        ...c.results,
        [eventId]: {
          ...result,
          studentScores: newScores,
          score: totalScore
        }
      }
    };
  });

  onUpdateClasses(updatedClasses);
};
```

**íŒ€ ì ìˆ˜ í•©ì‚°** (ê¸°ì¡´ ìœ ì§€):
```typescript
const handleTeamScoreChange = (classId: string, eventId: string, teamId: string, score: number) => {
  const updatedClasses = classes.map(c => {
    if (c.id !== classId) return c;

    const result = c.results[eventId];
    if (!result?.teams) return c;

    const updatedTeams = result.teams.map(t =>
      t.id === teamId ? { ...t, score } : t
    );

    const totalScore = updatedTeams.reduce((sum, t) => sum + t.score, 0);

    return {
      ...c,
      results: {
        ...c.results,
        [eventId]: {
          ...result,
          teams: updatedTeams,
          score: totalScore
        }
      }
    };
  });

  onUpdateClasses(updatedClasses);
};
```

---

## ğŸ¨ UI/UX íŠ¹ì§•

### 1. ìë™ íŒ€ ìƒì„± (ì§ì¤„ë„˜ê¸°)
- **2ëª… ì²´í¬ â†’ ì¦‰ì‹œ íŒ€ ìƒì„±** â†’ ì²´í¬ ìë™ í•´ì œ
- **ì‹œê°ì  í”¼ë“œë°±**: "â†’ ìë™ íŒ€ ìƒì„±!" ë©”ì‹œì§€ í‘œì‹œ
- **ì• ë‹ˆë©”ì´ì…˜**: íŒ€ ì¹´ë“œ ë¶€ë“œëŸ½ê²Œ ì¶”ê°€

### 2. íŒ€ ì‚­ì œ ì‹œ ìë™ ì¬ì •ë ¬
- 1íŒ€ ì‚­ì œ â†’ 2íŒ€ì´ 1íŒ€ìœ¼ë¡œ ìë™ ì¬ì •ë ¬
- í…Œì´ë¸”ì—ë„ ì¦‰ì‹œ ë°˜ì˜
- í˜¼ë€ ë°©ì§€

### 3. í•™ìƒ ì´ë¦„ í¬í•¨ íŒ€ëª…
- "ì² ìˆ˜,ì˜í¬ íŒ€" (ì§ê´€ì )
- "ë¯¼ìˆ˜,ì§€ì˜,ìˆ˜ì—° íŒ€" (ë‹¨ì²´ì „)

### 4. ì¶œì „ìë§Œ í…Œì´ë¸” í‘œì‹œ
- **ê°œì¸ì „**: 1,2ë²ˆë§Œ (3,4,5ë²ˆ ì œì™¸)
- **ì§/ë‹¨ì²´ì „**: íŒ€ë§Œ í‘œì‹œ
- ë¶ˆí•„ìš”í•œ í–‰ ì œê±° â†’ ê¹”ë”í•œ UI

---

## â±ï¸ ì˜ˆìƒ ì†Œìš” ì‹œê°„

| Phase | ì‘ì—… ë‚´ìš© | ì‹œê°„ |
|-------|----------|------|
| 1 | ë°ì´í„° êµ¬ì¡° ìˆ˜ì • | 15ë¶„ |
| 2 | ParticipantSelectionModal | 45ë¶„ |
| 3 | QuickTeamCreationModal | 1ì‹œê°„ |
| 4 | GradeView í†µí•© | 30ë¶„ |
| 5 | MatrixRecordTable ìˆ˜ì • | 45ë¶„ |
| 6 | ì ìˆ˜ ê³„ì‚° ê²€ì¦ | 15ë¶„ |

**ì´ ì˜ˆìƒ ì‹œê°„: 3-4ì‹œê°„**

---

## âœ… ì™„ë£Œ ì²´í¬ë¦¬ìŠ¤íŠ¸

### Phase 1
- [ ] `ClassResult.participantIds` ì¶”ê°€
- [ ] ë°ì´í„° êµ¬ì¡° í™•ì¸

### Phase 2
- [ ] `ParticipantSelectionModal.tsx` ìƒì„±
- [ ] ì²´í¬ë°•ìŠ¤ ì„ íƒ ê¸°ëŠ¥
- [ ] ì¶œì „ í•™ìƒ ì €ì¥

### Phase 3
- [ ] `QuickTeamCreationModal.tsx` ìƒì„±
- [ ] ì§ì¤„ë„˜ê¸° 2ëª… ìë™ íŒ€ ìƒì„±
- [ ] íŒ€ ì‚­ì œ ë° ì¬ì •ë ¬
- [ ] í•™ìƒ ì´ë¦„ í¬í•¨ íŒ€ëª…

### Phase 4
- [ ] GradeView ëª¨ë‹¬ í†µí•©
- [ ] ì¢…ëª©ë³„ ëª¨ë‹¬ ìë™ ì˜¤í”ˆ

### Phase 5
- [ ] MatrixRecordTable ì¶œì „ìë§Œ í‘œì‹œ
- [ ] "âœï¸ ì¶œì „ ìˆ˜ì •" ë²„íŠ¼ ì¶”ê°€
- [ ] ì°¸ê°€ì ìˆ˜ ê³„ì‚° ìˆ˜ì •

### Phase 6
- [ ] ê°œì¸ì „ ì ìˆ˜ í•©ì‚° ê²€ì¦
- [ ] íŒ€ ì ìˆ˜ í•©ì‚° ê²€ì¦
- [ ] ì „ì²´ ì´ì  í™•ì¸

---

## ğŸ”§ ê¸°ìˆ ì  ë³€ê²½ì‚¬í•­

### ìƒˆ íŒŒì¼ (2ê°œ)
- `components/ParticipantSelectionModal.tsx`
- `components/QuickTeamCreationModal.tsx`

### ìˆ˜ì • íŒŒì¼ (3ê°œ)
- `types.ts` - ClassResult í™•ì¥
- `components/GradeView.tsx` - ëª¨ë‹¬ í†µí•©
- `components/MatrixRecordTable.tsx` - ì¶œì „ìë§Œ í‘œì‹œ

### ì‚­ì œ íŒŒì¼ (2ê°œ)
- `components/TeamManagementModal.tsx` (ë¶ˆí•„ìš”)
- `components/TeamCreationModal.tsx` (ë¶ˆí•„ìš”)

---

**ì‘ì„±ì¼**: 2025-01-21
**ë²„ì „**: 2.0 (ì™„ì „ ê°œí¸)
**ì‘ì„±ì**: Claude Code
